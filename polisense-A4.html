<!DOCTYPE html>
<!--Cambia el lenguaje - labels.json-->
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polisense.AI - A4 One Pager</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="page-wrapper">
        
        <!-- Header -->
        <header class="header">
            <img src="assets/logo_new.png" alt="Polisense.AI Logo" class="logo">
            <div class="header-text">
                <h1 id="header-title"></h1>
                <p id="header-subtitle"></p>
            </div>
        </header>

        <!-- Problem -->
        <section class="problem">
            <div class="problem-container">
                <div class="crisis-summary card">
                    <h2 id="problem-crisis-title"></h2>
                    <div class="crisis-summary-content">
                        <p id="problem-crisis-text"></p>
                    </div>
                </div>
                <div class="problem-details card">
                    <h3 id="problem-local_gov-title"></h3>
                    <p id="problem-local_gov-text"></p>
                    <div id="problem-local_gov-pain_points" class="pain-points-container">
                        <!-- Pain points will be inserted here by JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Content Area -->
        <main class="main-content">
            <div class="opportunity-pillars card">
                <h3 id="main_content-opportunity-title"></h3>
                <p id="main_content-opportunity-text"></p>
                <div id="main_content-opportunity-pillars" class="pillars-container">
                    <!-- Pillars will be inserted here by JS -->
                </div>
            </div>
            <div class="dashboard-features card">
                <h3 id="main_content-features-title"></h3>
                <div class="dashboard-content">
                    <img src="assets/demo.jpg" alt="Polisense.AI Dashboard" class="dashboard-image">
                    <div class="features-list">
                        <ul id="main_content-features-list">
                            <!-- Features will be inserted here by JS -->
                        </ul>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="results-summary">
                <p id="footer-results"></p>
            </div>
            <div class="supported-by">
                <h4 id="footer-supported_by"></h4>
                <div class="supporter-logos">
                    <img src="assets/supported-by/a-logo.jpg" alt="Supporter A Logo">
                    <img src="assets/supported-by/b-logo.png" alt="Supporter B Logo">
                    <img src="assets/supported-by/c-logo.png" alt="Supporter C Logo">
                </div>
            </div>
            <div id="footer-contact" class="contact-info">
                <!-- Contact info will be inserted here by JS -->
            </div>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Function to get query parameters
            const getQueryParam = (param) => {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(param);
            };

            // Check for theme parameter and apply bright mode if needed
            const theme = getQueryParam('theme');
            if (theme === 'bright') {
                document.body.classList.add('bright-mode');
            }

            // Determine which labels file to load
            const lang = getQueryParam('lang') || 'en';
            const labelsFile = lang === 'en' ? 'labels.json' : `labels_${lang}.json`;
            console.log(`Loading labels from: ${labelsFile}`);

            fetch(labelsFile)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Network response was not ok: ${response.statusText} for file ${labelsFile}`);
                    }
                    return response.json();
                })
                .then(data => {
                    // Header
                    document.getElementById('header-title').innerHTML = data.header.title;
                    document.getElementById('header-subtitle').innerHTML = data.header.subtitle;

                    // Problem Section
                    document.getElementById('problem-crisis-title').innerHTML = data.problem.crisis.title;
                    document.getElementById('problem-crisis-text').innerHTML = data.problem.crisis.text;
                    document.getElementById('problem-local_gov-title').innerHTML = data.problem.local_gov.title;
                    document.getElementById('problem-local_gov-text').innerHTML = data.problem.local_gov.text;
                    
                    const painPointsContainer = document.getElementById('problem-local_gov-pain_points');
                    painPointsContainer.innerHTML = ''; // Clear existing
                    data.problem.local_gov.pain_points.forEach(point => {
                        const pointDiv = document.createElement('div');
                        pointDiv.className = 'pain-point-card';
                        pointDiv.innerHTML = `<i class="${point.icon}"></i><p>${point.text}</p>`;
                        painPointsContainer.appendChild(pointDiv);
                    });

                    // Main Content
                    document.getElementById('main_content-opportunity-title').innerHTML = data.main_content.opportunity.title;
                    document.getElementById('main_content-opportunity-text').innerHTML = data.main_content.opportunity.text;

                    const pillarsContainer = document.getElementById('main_content-opportunity-pillars');
                    pillarsContainer.innerHTML = ''; // Clear existing
                    data.main_content.opportunity.pillars.forEach(pillar => {
                        const pillarDiv = document.createElement('div');
                        pillarDiv.className = 'pillar-card';
                        pillarDiv.innerHTML = `<i class="${pillar.icon}"></i><h4 class="pillar-title">${pillar.title}</h4><p class="pillar-description">${pillar.description}</p>`;
                        pillarsContainer.appendChild(pillarDiv);
                    });

                    document.getElementById('main_content-features-title').innerHTML = data.main_content.features.title;
                    const featuresList = document.getElementById('main_content-features-list');
                    featuresList.innerHTML = ''; // Clear existing
                    data.main_content.features.list.forEach(feature => {
                        const featureLi = document.createElement('li');
                        featureLi.innerHTML = `<i class="${feature.icon}"></i> ${feature.text}`;
                        featuresList.appendChild(featureLi);
                    });

                    // Footer
                    document.getElementById('footer-results').innerHTML = data.footer.results;
                    document.getElementById('footer-supported_by').innerHTML = data.footer.supported_by;

                    const contactContainer = document.getElementById('footer-contact');
                    contactContainer.innerHTML = ''; // Clear existing
                    data.footer.contact.forEach(item => {
                        const contactSpan = document.createElement('span');
                        contactSpan.innerHTML = `<i class="${item.icon}"></i> ${item.text}`;
                        contactContainer.appendChild(contactSpan);
                    });

                    // Signal that content is loaded
                    document.body.classList.add('content-loaded');
                    console.log('Content loaded successfully.');
                })
                .catch(error => {
                    console.error('Error loading or parsing labels:', error);
                    const errorDiv = document.createElement('div');
                    errorDiv.textContent = `Failed to load content: ${error.message}. Please check the console.`;
                    errorDiv.style.color = 'red';
                    errorDiv.style.padding = '20px';
                    errorDiv.style.fontFamily = 'sans-serif';
                    document.body.prepend(errorDiv);
                });
        });
    </script>
</body>
</html>
